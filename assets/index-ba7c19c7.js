import{r as c,j as s}from"./index-11fb5c98.js";import{S as he,n as U}from"./FileSaver.min-7222e1eb.js";import{g as V}from"./getZksTasks-e0cecdda.js";import{F as j,T as X,a as pe}from"./index-fabbc82a.js";import{S as h,I as fe,E as me,a as xe}from"./index-d7eca782.js";import{C as ye}from"./axios-4f7dbae2.js";import{J as Y,L as ge}from"./EditOutlined-d581a128.js";import{L as we}from"./index-192c80ef.js";import{m as q}from"./index-5a560cd3.js";import"./index-c7b6b5c6.js";const{Content:ke}=we;function De(){c.useState(0),c.useState(0),c.useState(!1),c.useState({});const[f,b]=c.useState([]);c.useState(!1),c.useState(!1),j.useForm(),j.useForm();const[m,C]=c.useState([]);j.useForm(),c.useState(!1);const[S,x]=c.useState(!1),[G,v]=c.useState(!1),[y,z]=c.useState(new Map),[W,g]=c.useState([]),[ee,re]=c.useState(!1),[se,te]=c.useState(0),[w,ne]=c.useState(!1),F="0x2da10a1e27bf85cedd8ffb1abbe97e53391c0295",E="0x8B791913eB07C32779a16750e3868aA8495F5964",P="0xb9061E38FeE7d30134F56aEf7117E2F6d1580666",_="0xbE7D1FD1f6748bbDefC4fbaCafBb11C6Fc506d1d",D="0x6e2B76966cbD9cF4cC2Fa0D76d24d5241E0ABC2F",I="0x9606eC131EeC0F84c95D82c9a63959F2331cF2aC",A="0x5B91962F5ECa75E6558E4d32Df69B30f75cc6FE5",B="0xCBE2093030F485adAaf5b61deb4D9cA8ADEAE509",L="0xd999E16e68476bC749A28FC14a0c3b6d7073F50c",T="0xC5db68F30D21cBe0C9Eac7BE5eA83468d69297e6",O="0x04e9Db37d8EA0760072e1aCE3F2A219988Fdac29",N="0x1BbD33384869b30A323e15868Ce46013C82B86FB",K="0x1181D7BE04D80A8aE096641Ee1A87f7D557c6aeb",M="0x39e098a153ad69834a9dac32f0fca92066ad03f4",J="0x6C31035D62541ceba2Ac587ea09891d1645D6D07",R="0x84d05333f1F5Bf1358c3f63A113B1953C427925D",H="0x36A1aCbbCAfca2468b85011DDD16E7Cb4d673230",Z="0x498f7bB59c61307De7dEA005877220e4406470e9",$="0xA269031037B4D5fa3F771c401D19E57def6Cb491",ae=()=>{ne(!w)},oe=()=>w?s.jsx(me,{}):s.jsx(xe,{}),le=async()=>{try{const e=[...f],r=[];for(let n of e)r.push(()=>new Promise(a=>{const t=d(n.address,F);n.sync=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,E);n.mute=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,P);n.okx=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,_);n.spacefi=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,D);n._1inch=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,I);n.izumi=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,A);n.rollup=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,B);n.zns=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,L);n.velo=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,T),p=d(n.address,O);n.rf=t+p,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,N),p=d(n.address,K);n.eralend=t+p,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,M);n.mav=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,J);n.veSync=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,R);n.usdp=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,H);n.ooe=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,Z);n.ezk=t,a()})),r.push(()=>new Promise(a=>{const t=d(n.address,$);n.odos=t,a()}));await Promise.all(r.map(n=>n())),g([...e]),localStorage.setItem("addresses",JSON.stringify(e))}catch(e){console.error(e)}finally{x(!1)}},ie=async()=>{if(!m.length){U.error({message:"错误",description:"请先选择要刷新的地址"},2);return}x(!0);try{const e=[...f],r=[];for(let n of m){const a=e.findIndex(t=>t.key===n);if(a!==-1){const t=e[a],p=new Map,i=await V(t.address);p.set(t.address,i),z(p),await new Promise(o=>{setTimeout(()=>{o()},200)}),r.push(()=>new Promise(o=>{const l=u(i,F);t.sync=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,E);t.mute=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,P);t.okx=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,_);t.spacefi=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,D);t._1inch=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,I);t.izumi=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,A);t.rollup=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,B);t.zns=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,L);t.velo=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,T),k=u(i,O);t.rf=l+k,o()})),r.push(()=>new Promise(o=>{const l=u(i,N),k=u(i,K);t.eralend=l+k,o()})),r.push(()=>new Promise(o=>{const l=u(i,M);t.mav=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,J);t.veSync=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,R);t.usdp=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,H);t.ooe=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,Z);t.ezk=l,o()})),r.push(()=>new Promise(o=>{const l=u(i,$);t.odos=l,o()}))}}await Promise.all(r.map(n=>n())),g([...e]),localStorage.setItem("addresses",JSON.stringify(e)),q.success("刷新成功")}catch(e){U.error({message:"错误",description:e.message},2)}finally{x(!1),C([])}},d=(e,r)=>{r=r.toLowerCase();const n=y.get(e);return n==null?(q.info("等待数据加载完成再刷新"),"error"):n.reduce((t,p)=>p===r?t+1:t,0)},u=(e,r)=>(r=r.toLowerCase(),e.reduce((a,t)=>t===r?a+1:a,0));c.useEffect(()=>{const e=()=>{te(window.innerHeight-180)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]),c.useEffect(()=>{v(!0);const e=localStorage.getItem("addresses");e&&(b(JSON.parse(e)),g(JSON.parse(e))),(async()=>{const n=JSON.parse(e);if(!n)return;const a=new Map,t=[];for(const p of n){const i=p.address,o=V(i).then(l=>{a.set(i,l)}).catch(l=>{console.error(`Error fetching tasks for address ${i}:`,l)});t.push(o)}try{await Promise.all(t),v(!1),z(a)}catch(p){console.error("Error fetching task contracts:",p)}})()},[]),c.useEffect(()=>{!ee&&f.length>0&&y.size>0&&(le(),re(!0))},[f,y]);const ce={selectedRowKeys:m,onChange:e=>{C(e)}},[de,Q]=c.useState(null),ue=[{title:"#",key:"index",align:"center",render:(e,r,n)=>n+1,width:34.5},{title:"备注",dataIndex:"name",key:"name",align:"center",render:(e,r)=>r.key===de?s.jsx(fe,{placeholder:"请输入备注",defaultValue:e,onPressEnter:a=>{r.name=a.target.value,b([...f]),localStorage.setItem("addresses",JSON.stringify(f)),Q(null)}}):s.jsxs(s.Fragment,{children:[s.jsx(pe,{color:"blue",children:e}),s.jsx(Y,{shape:"circle",icon:s.jsx(ge,{}),size:"small",onClick:()=>Q(r.key)})]}),width:70},{title:s.jsxs("span",{children:["钱包地址",s.jsx("span",{onClick:ae,style:{marginLeft:8,cursor:"pointer"},children:oe()})]}),dataIndex:"address",key:"address",align:"center",render:e=>w?"***":e,width:150},{title:"最后交易",dataIndex:"zks2_last_tx",key:"zks2_last_tx",align:"center",render:(e,r)=>{let n="inherit";return e===null?s.jsx(h,{}):(e.includes("周")?n="red":n="#1677ff",s.jsx("a",{href:"https://explorer.zksync.io/address/"+r.address,target:"_blank",style:{color:n},children:e}))},width:55},{title:s.jsx("a",{href:"https://defillama.com/chain/zkSync Era",style:{color:"white"},target:"_blank",rel:"noopener noreferrer",children:"zkSyncEra Task List  [参考defillama TVL数据]"}),key:"zks_era_group",className:"zks_era",children:[{title:s.jsx("a",{href:"https://syncswap.xyz",target:"_blank",rel:"noopener noreferrer",children:"Sync"}),dataIndex:"sync",key:"sync",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.sync===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://app.mute.io/swap",target:"_blank",rel:"noopener noreferrer",children:"Mute"}),dataIndex:"mute",key:"mute",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.mute===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://www.okx.com/cn/web3/dex",target:"_blank",rel:"noopener noreferrer",children:"OKX"}),dataIndex:"okx",key:"okx",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.okx===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://swap-zksync.spacefi.io/#/swap",target:"_blank",rel:"noopener noreferrer",children:"Spacefi"}),dataIndex:"spacefi",key:"spacefi",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.spacefi===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://app.1inch.io",target:"_blank",rel:"noopener noreferrer",children:"1inch"}),dataIndex:"_1inch",key:"_1inch",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r._1inch===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://izumi.finance/trade/swap",target:"_blank",rel:"noopener noreferrer",children:"izumi"}),dataIndex:"izumi",key:"izumi",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.izumi===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://app.vesync.finance/swap",target:"_blank",rel:"noopener noreferrer",children:"veSync"}),dataIndex:"veSync",key:"veSync",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.veSync===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://app.mav.xyz/?chain=324",target:"_blank",rel:"noopener noreferrer",children:"Mav"}),dataIndex:"mav",key:"mav",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.mav===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://zks.network/",target:"_blank",rel:"noopener noreferrer",children:"zns"}),dataIndex:"zns",key:"zns",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.zns===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://app.velocore.xyz/swap",target:"_blank",rel:"noopener noreferrer",children:"velo"}),dataIndex:"velo",key:"velo",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.velo===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://app.reactorfusion.xyz/",target:"_blank",rel:"noopener noreferrer",children:"Reactor"}),dataIndex:"rf",key:"rf",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.rf===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://app.eralend.com/",target:"_blank",rel:"noopener noreferrer",children:"eraLend"}),dataIndex:"eralend",key:"eralend",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.eralend===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://app.overnight.fi/stats?tabName=zksync",target:"_blank",rel:"noopener noreferrer",children:"USD+"}),dataIndex:"usdp",key:"usdp",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.usdp===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://app.openocean.finance/CLASSIC#/ZKSYNC/ETH/USDC",target:"_blank",rel:"noopener noreferrer",children:"OOE"}),dataIndex:"ooe",key:"ooe",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.ooe===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://dapp.ezkalibur.com/",target:"_blank",rel:"noopener noreferrer",children:"eZK"}),dataIndex:"ezk",key:"ezk",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.ooe===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:s.jsx("a",{href:"https://app.odos.xyz/",target:"_blank",rel:"noopener noreferrer",children:"odos"}),dataIndex:"odos",key:"odos",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.ooe===e,render:(e,r)=>s.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?s.jsx(h,{}):e}),width:55},{title:"进度",dataIndex:"progress",key:"progress",align:"center",sorter:(e,r)=>e.progress-r.progress,render:(e,r)=>{const n=["sync","mute","okx","spacefi","_1inch","izumi","zns","velo","rf","eralend","mav","veSync","usdp","ooe","ezk","odos"],t=n.reduce((i,o)=>r[o]>0?i+1:i,0)/n.length*100;r.progress=t;const p=`rgba(240, 121, 78, ${t/100})`;return{children:s.jsx("span",{children:e===null?s.jsx(h,{}):`${t.toFixed(2)}%`}),props:{style:{background:p}}}},width:60}]}];return s.jsx("div",{children:s.jsx(ke,{children:s.jsx(h,{spinning:G,children:s.jsx(X,{rowSelection:ce,dataSource:W,pagination:!1,bordered:!0,style:{marginBottom:"0px",zIndex:2},size:"small",columns:ue,scroll:{y:se},summary:e=>{e.forEach(({eth_balance:r,zks1_balance:n,zks2_balance:a,zks2_usdcBalance:t,totalFee:p})=>{}),Array(10).fill().map((r,n)=>s.jsx(X.Summary.Cell,{index:n+6}))},footer:()=>s.jsx(ye,{children:s.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",gap:"10px"},children:s.jsx(Y,{type:"primary",onClick:ie,loading:S,size:"large",style:{width:"20%"},icon:s.jsx(he,{}),children:S?"正在刷新":"刷新选中地址"})})})})})})})}export{De as default};
